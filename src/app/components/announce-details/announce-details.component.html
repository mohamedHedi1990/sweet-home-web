<div id="page-container">
  <div>
    <app-navbar></app-navbar>
  </div>
  <div>
    <div class="gallery">
      <div class="row">
        <div class="col-md-6">
          <img
            [src]="announcementDetails.announcementPictureUrls[0]"
            height="500px"
            class="img-responsive w-100 border-black"
          />
        </div>

        <div class="col-md-6">
          <div class="row mb-3">
            <div
              class="col-md-6"
              *ngFor="let imgGalerie of galerieWithoutFirstImg | slice: 0:4"
            >
              <img
                [src]="imgGalerie"
                height="250px"
                width="100%"
                class="img-responsive border-black"
              />
            </div>
            <!--<div  class="col-md-6">
                <img src="../../../assets/images/announce-details/img-4.webp" class="img-fluid border-black">
              </div>-->
          </div>

          <!--<div class="row">
              <div class="col-md-6">
                <img src="../../../assets/images/announce-details/img-1.jpg" class="img-fluid border-black">
              </div>
              <div class="col-md-6">
                <img src="../../../assets/images/announce-details/img-5.webp" class="img-fluid border-black">
              </div>
            </div>-->
        </div>
      </div>
    </div>
    <!-- section start -->
    <section>
      <div class="details-wrapper b-bottom">
        <div class="container">
          <div class="row mb-4">
            <div class="col-lg-8 col-sm-8 col-xs-12">
              <div class="room">
                <div class="room-section-summary">
                  <div class="row mt-5">
                    <div class="col-md-3">
                      <div class="photo-badge">
                        <a
                          href="javascript:void(0)"
                          class="media-photo media-round"
                        >
                          <img
                            alt=""
                            src="assets/img/sigle.png"
                            title="TunRooms Properties"
                            width="115"
                            height="115"
                          />
                        </a>
                        <a href="javascript:void(0)">TunRooms Properties</a>
                      </div>
                    </div>
                    <div class="col-md-9">
                      <h1>
                        {{ this.announcementDetails.announcementTitle }}
                      </h1>
                      <p class="summary-info">
                        {{
                          this.announcementDetails.announcementAddress
                            .addressCity.cityLabel
                        }},
                        {{
                          this.announcementDetails.announcementAddress
                            .addressCity.country.countryLabel
                        }}
                      </p>
                      <div
                        class="mt-3 row row-condensed text-muted text-center roomtype-img"
                      >
                        <div class="col-md-3 col-sm-3 col-xs-4 roomty">
                          <img
                            src="../../../assets/images/icons/armchair.png"
                            width="30px"
                          />
                          <div class="mt-3 summary-info">Logement entier</div>
                        </div>
                        <div class="col-md-3 col-sm-3 col-xs-4 roomty">
                          <img
                            src="../../../assets/images/icons/group.png"
                            width="30px"
                          />
                          <div class="mt-3 summary-info">
                            {{ announcementDetails.announcementGuestNumber }}
                            Invités
                          </div>
                        </div>
                        <div class="col-md-3 col-sm-3 col-xs-4 roomty">
                          <img
                            src="../../../assets/images/icons/bed.png"
                            width="30px"
                          />
                          <div class="mt-3 summary-info">
                            {{ this.announcementDetails.announcementBedNumber }}
                            Lits
                          </div>
                        </div>

                        <div class="row">
                          <div class="col-sm-3"></div>
                          <div class="col-sm-3"></div>
                          <div class="col-sm-3"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-4 col-sm-4 col-xs-12">
              <!-- form user info -->
              <div class="card card-reservation">
                <div class="card-header price-info">
                  <h2 class="mb-0">
                    TND {{ this.announcementDetails.announcementCost }}
                  </h2>

                  <p class="per-night">Par nuit</p>
                </div>
                <div class="card-body">
                  <form
                    #form1="ngForm"
                    role="form"
                    (ngSubmit)="onReserveSubmit()"
                    ngNativeValidate
                  >
                    <div class="row mb-3">
                      <div class="col-md-6">
                        <label> Arrivée </label>
                        <input
                          class="form-control"
                          type="date"
                          placeholder="Arrivée"
                          required
                          name="comingDate"
                          [(ngModel)]="reservation.reservationStartDate"
                        />
                      </div>

                      <div class="col-md-6">
                        <label> Départ </label>
                        <input
                          class="form-control"
                          type="date"
                          placeholder="Départ"
                          required
                          name="departureDate"
                          [(ngModel)]="reservation.reservationEndDate"
                        />
                      </div>
                      <div>
                        <label>Nombre d’invités</label>
                        <ng-select
                          required
                          [(ngModel)]="reservation.reservationGuestNumber"
                          name="nbGuest"
                        >
                          <ng-option value="1">1 invité</ng-option>
                          <ng-option value="2">2 invités</ng-option>
                          <ng-option value="3">3 invités</ng-option>
                          <ng-option value="4">4 invités</ng-option>
                          <ng-option value="5">5 invités</ng-option>
                          <ng-option value="6">6 invités</ng-option>
                          <ng-option value="7">7 invités</ng-option>
                          <ng-option value="8">8 invités</ng-option>
                          <ng-option value="9">9 invités</ng-option>
                          <ng-option value="10">10 invités</ng-option>
                          <ng-option value="11">11+ invités</ng-option>
                        </ng-select>
                      </div>
                    </div>

                    <div class="form-group text-center row">
                      <div class="col-sm-12">
                        <button type="submit" class="btn">
                          Réserver le logement
                        </button>
                      </div>
                    </div>
                  </form>
                  <p class="text-center pt-3">
                    <small>
                      Vous serez en mesure d'examiner avant de payer.
                    </small>
                  </p>
                </div>
              </div>
              <!-- /form user info -->
            </div>
          </div>
        </div>
      </div>
      <div class="container">
        <div class="row mt-5">
          <div class="b-bottom col-lg-8 col-sm-8 col-xs-12">
            <div class="room-a-propos">
              <h2 class="title">A propos de cette annonce</h2>
              <p>
                {{ announcementDetails.announcementSummary }}
              </p>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-8 col-sm-8 col-xs-12">
          <div class="container" style="margin-left: 93px">
            <div class="row mt-3">
              <div class="col-md-2 col-sm-12">
                <div>
                  <p>Le logement</p>
                </div>
              </div>
              <div class="col-md-10 col-sm-12">
                <div class="row">
                  <div class="col-md-5 col-sm-5">
                    <div class="subtile-descrip">
                      Type de lit:
                      <strong>
                        {{ announcementDetails.announcementBedType }}</strong
                      >
                    </div>
                    <div class="subtile-descrip">
                      Type de propriété:
                      <strong
                        *ngIf="announcementDetails.announcementType == 'HOUSE'"
                        >Logement entier</strong
                      >
                      <strong
                        *ngIf="
                          announcementDetails.announcementType == 'APPARTMENT'
                        "
                        >Appartment</strong
                      >
                      <strong
                        *ngIf="announcementDetails.announcementType == 'STAGE'"
                        >Etage entiére</strong
                      >
                      <strong
                        *ngIf="announcementDetails.announcementType == 'VILLA'"
                        >Villa</strong
                      >
                    </div>

                    <div class="subtile-descrip">
                      Capacité d'accueil:
                      <strong>{{
                        announcementDetails.announcementGuestNumber
                      }}</strong>
                    </div>
                  </div>
                  <div class="col-md-5">
                    <div class="subtile-descrip">
                      Chambres:
                      <strong>{{
                        announcementDetails.announcementRoomNumber
                      }}</strong>
                    </div>

                    <div class="subtile-descrip">
                      Salle de bain:
                      <strong>{{
                        announcementDetails.announcementBathRoomNumber
                      }}</strong>
                    </div>

                    <div class="subtile-descrip">
                      Lits:
                      <strong>{{
                        announcementDetails.announcementBedNumber
                      }}</strong>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <hr />
            <div class="row mt-3">
              <div class="col-md-2 col-sm-12">
                <p>Equipements de base</p>
              </div>

              <div class="col-md-10">
                <div>
                  <div class="row rooms_essentiels">
                    <div
                      class="col-sm-5 mb-2"
                      *ngFor="
                        let equipement of announcementDetails.announcementEquipements
                          | slice: 0:5
                      "
                    >
                      <div>
                        <img
                          [src]="
                            '../../../assets/images/icons/equipements_icons/' +
                            equipement.equipementCode +
                            '.png'
                          "
                          width="22px"
                        />
                        &nbsp;
                        <span>
                          <strong>{{ equipement.equipementLabel }}</strong>
                        </span>
                      </div>
                    </div>
                    <!-- <div class="col-sm-5 mb-2">
                                        <div>
                                            <img src="../../../assets/images/icons/television.png" width="22px">
                                            &nbsp;
                                            <span>
                                                <strong>Télévision</strong>
                                            </span>
                
                                        </div>
            
                                    </div>
                                    <div class="col-sm-5 mb-2">
                                        <div>
                                            <img src="../../../assets/images/icons/chauffage.png" width="22px">
                                        &nbsp;
                                        <span>
                                            <strong> Eau Chaude </strong>
                                        </span>
                                        </div>
            
                                    </div>
                                    <div class="col-sm-5 ">
                                        <div>
                                            <img src="../../../assets/images/icons/snowflake.png" width="22px">
                                            &nbsp;
                                            <span>
                                                <strong>Climatisation</strong>
                                            </span> 
                    
                                        </div>
            
                                    </div>
            
                                    <div class="col-sm-5 mb-2">
                                        <div>
                                                <img src="../../../assets/images/icons/hot-water.png" width="22px">
                                                &nbsp;
                                  
                                                <span><strong> Chauffage</strong></span>
                
                                        </div>
                
                
                                    </div>-->

                    <div [hidden]="isShowEssentiel" class="row">
                      <div
                        class="col-sm-5 mb-2"
                        *ngFor="
                          let equipement of announcementDetails.announcementEquipements
                            | slice: 6:12
                        "
                      >
                        <div>
                          <img
                            [src]="
                              '../../../assets/images/icons/equipements_icons/' +
                              equipement.equipementCode +
                              '.png'
                            "
                            width="22px"
                          />
                          &nbsp;
                          <span
                            ><strong>
                              {{ equipement.equipementLabel }}</strong
                            ></span
                          >
                        </div>
                      </div>
                      <!--<div class="col-sm-5 mb-2">
                  
                                             <div>
                                              <img src="../../../assets/images/icons/swimming-pool.png" width="22px">
                                              &nbsp;
                                                <span><strong> Piscine</strong></span>
                  
                                              </div>
                                      </div>
                                      <div class="col-sm-5 mb-2">

                                            <div>
                                              <img src="../../../assets/images/icons/parking.png" width="22px">
                                              &nbsp;
                                              <span><strong>Parking gratuit sur place</strong></span>
                  
                                            </div>
                  
                  
                                      </div>
                                      <div class="col-sm-5 mb-2">
                                           <div>
                                            <img src="../../../assets/images/icons/fireplace.png" width="22px">
                                            &nbsp;
                                            <span><strong> Cheminée</strong></span>
                  
                                          </div>
                  
                  
                                      </div>
                                      <div class="col-sm-5 mb-2">
                  
                                            <div>
                                              <img src="../../../assets/images/icons/reception-bell.png" width="22px">
                                              &nbsp;
                                                <span><strong> Portier / Concierge </strong></span>
                  
                                            </div>
                  
                  
                                      </div>
                                      <div class="col-sm-5">

                                          <div>
                                            <img src="../../../assets/images/icons/family.png" width="22px">
                                            &nbsp;
                                           <span><strong>Convient aux familles avec enfants </strong></span>
                  
                                          </div>
                  
                  
                                      </div>-->
                    </div>

                    <div class="col-sm-5">
                      <a
                        (click)="toggleDisplay('essentiel')"
                        href="javascript:void(0)"
                      >
                        <strong [hidden]="!isShowEssentiel">+ Plus</strong>
                        <strong [hidden]="isShowEssentiel">- Plus</strong>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <hr />
            <div class="row mt-3">
              <div class="col-md-2 col-sm-12">
                <div><p>Prix</p></div>
              </div>
              <div class="col-md-10 col-sm-12">
                <div class="row">
                  <div class="pb-2 col-md-5 col-sm-5">
                    <div class="subtile-descrip">
                      Personnes supplémentaires:
                      <strong>
                        <span
                          *ngIf="
                            announcementDetails.announcementAuthorizedExtraGuests ===
                            false
                          "
                          >Non</span
                        ></strong
                      >
                      <strong>
                        <span
                          *ngIf="
                            announcementDetails.announcementAuthorizedExtraGuests ===
                            true
                          "
                          >Oui</span
                        ></strong
                      >
                    </div>
                  </div>
                  <div class="col-md-5">
                    <div class="subtile-descrip">
                      Annulation:
                      <a href="javascript:void(0)"><strong>Strictes</strong></a>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-12">
                    <h4 class="text-black">
                      <strong>Réduction selon durée du séjour</strong>
                    </h4>
                  </div>
                  <div class="subtile-descrip col-md-6">6 nuits</div>
                  <div class="subtile-descrip col-md-6">10%</div>
                </div>
              </div>
            </div>
            <hr />
            <div class="row mt-3 pb-3 description">
              <div class="col-md-2">
                <p>Description</p>
              </div>

              <div class="col-md-8">
                <p>
                  Les principales caractéristiques comprennent:
                  {{ announcementDetails.announcementDescription }}
                </p>
                <!-- <ul style="padding-left: 14px;">
                        <li>Villa face à La Méditerranée</li>
                        <li>Distance à pied d'une petite crique pour les nageurs confirmés.</li>
                        <li>Tranquille, calme, intimité avec des jardins magnifiquement entretenus tout autour</li>
                        <li>Piscine à débordement et coin détente</li>
                        <li>3 Chambres doubles avec une literie haut de gamme pour un confort optimal</li>
                        <li>La suite parentale bénéficie d'une douche et d'un bain avec une vue sur mer</li>
                      </ul> -->
                <!---<p><strong>Accès clients</strong></p>
                     <p>Les voyageurs auront accès à toute la Villa </p>
                      


                     <div [hidden]="isShowDescript">

                        <p><strong>Règles de la maison</strong></p>
                        <p> {{announcementDetails.announcementRules}} </p>
                        <p><strong>Le quartier</strong></p>
                        <p> Pieds dans l'eau à Sounine </p>

                    </div>

                    <a (click)="toggleDisplay('descript')" href="javascript:void(0)">
                      <strong [hidden]="!isShowDescript">+ Plus</strong>
                      <strong [hidden]="isShowDescript">- Plus</strong>
                    </a> -->
              </div>
            </div>
            <hr />
            <div class="row mt-3">
              <div class="col-md-2 col-sm-12">
                <div>
                  <p>Règles de la maison</p>
                </div>
              </div>
              <div class="col-md-10 col-sm-12">
                <div>
                  <p>
                    {{ announcementDetails.announcementRules }}
                    <!-- La Villa n'est accessible qu'en 4x4 ou voiture tout terrain, la piste qui <br>mène au logement est assez difficile, ce qui assure une intimité meme en plein été.<br>
                        - Les événements ne sont pas acceptés-->
                  </p>
                </div>
              </div>
            </div>
            <hr />
            <div class="row mt-3">
              <div class="col-md-2 col-sm-12">
                <div>
                  <p>Dispositifs de sécurité</p>
                </div>
              </div>
              <div class="col-md-10 col-sm-12">
                <div class="row">
                  <div class="col-sm-5">
                    <div>
                      <img src="../../../assets/images/icons/validation.png" />
                      &nbsp;
                      <span><strong>Gardien</strong></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <hr />

            <div class="row mt-3">
              <div class="col-md-2 col-sm-12">
                <div>
                  <p>Disponibilité</p>
                </div>
              </div>
              <div class="col-md-10 col-sm-12">
                <div class="row">
                  <div class="col-md-5">
                    <span>Séjour minimum:</span>
                    <strong>{{
                      announcementDetails.announcementMinStay
                    }}</strong>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-12">
                    <p>
                      Pendant
                      {{
                        announcementDetails.announcementFirstAvailableDate
                          | date: "dd/MM/yyyy"
                      }}
                      -
                      {{
                        announcementDetails.announcementEndAvailableDate
                          | date: "dd/MM/yyyy"
                      }}
                    </p>
                    <p>
                      les clients restent pour un minimum de
                      {{ announcementDetails.announcementMinStay }} nuits
                    </p>
                    <p>
                      les clients restent pour un maximum de
                      {{ announcementDetails.announcementMaxStay }} nuits
                    </p>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-10">
                    <ngb-carousel
                      *ngIf="
                        announcementDetails.announcementPictureUrls.length > 0
                      "
                    >
                      <ng-template
                        ngbSlide
                        *ngFor="
                          let img of announcementDetails.announcementPictureUrls
                        "
                      >
                        <div class="picsum-img-wrapper">
                          <img [src]="img" class="img-fluid" />
                        </div>
                      </ng-template>
                    </ngb-carousel>
                  </div>
                </div>
              </div>
            </div>
            <hr />

            <div class="row mt-3">
              <div class="col-md-7 col-sm-12">
                <h2 class="title">A propos de l'hôte, TunRooms Properties</h2>
              </div>
              <div class="col-md-10 col-sm-12">
                <div class="row mb-3">
                  <div class="col-md-2">
                    <a
                      href="javascript:void(0)"
                      class="media-photo media-round"
                    >
                      <img
                        class="img"
                        [src]="
                          announcementDetails.announcementOwnerPublished
                            .userPictureUrl
                        "
                      />
                    </a>
                  </div>
                  <div class="col-md-8">
                    <p>
                      {{
                        announcementDetails.announcementOwnerPublished
                          .userFirstName
                      }}
                      {{
                        announcementDetails.announcementOwnerPublished
                          .userLastName
                      }}
                    </p>
                    <p>
                      Member since
                      {{
                        announcementDetails.announcementOwnerPublished
                          .userDateInscription | date: "dd/MM/yyyy"
                      }}
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-4 col-sm-4 col-xs-12">
          <div class="container">
            <div class="card card-comment">
              <div class="card-header">
                <h2 class="mb-0">
                  Avis
                  <span class="num-avis"
                    >{{ announcementDetails.commentDtos?.length }} avi(s)</span
                  >
                </h2>
              </div>
              <div class="card-body">
                <form
                  *ngIf="isUserLoggedIn()"
                  #form2="ngForm"
                  role="form"
                  (ngSubmit)="onCommentSubmit()"
                  ngNativeValidate
                >
                  <div class="row mb-3">
                    <div class="col-md-2">
                      <label> Commentaire </label>
                    </div>
                    <div class="col-md-12">
                      <textarea
                        class="form-control"
                        type="text"
                        placeholder="Votre commentaire"
                        required
                        name="comment"
                        [(ngModel)]="comment.commentText"
                      ></textarea>
                    </div>
                  </div>

                  <div class="form-group text-center row">
                    <div class="col-sm-12">
                      <button type="submit" class="btn">
                        Ajouter Commentaire
                      </button>
                    </div>
                  </div>
                </form>
                <hr />
                <table class="table table-borderless">
                  <tr *ngFor="let comment of announcementDetails.commentDtos">
                    <td class="row">
                      <div class="col-2">
                        <img
                          class="img"
                          [src]="comment.writer.userPictureUrl"
                        />
                      </div>
                      <div class="col-10">
                        <p>
                          <b
                            >{{ comment.writer.userFirstName }}
                            {{ comment.writer.userLastName }}</b
                          >
                        </p>
                        <p>
                          {{ comment.commentText }}
                        </p>
                      </div>
                    </td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- Section ends -->
  </div>
  <div>
    <app-footer></app-footer>
  </div>
</div>
