<div class="home_top_slider" style="min-height: calc(100vh - 227px) !important">
  <div class="new_search_form">
    <div class="new_search_list">
      <table class="table table-striped">
        <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Titre d'annonce</th>
          <th scope="col">Date Création Réservation</th>
          <th scope="col">Date Fin Réservation</th>
          <th scope="col">Statut</th>
          <th scope="col">Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr
          *ngFor="
              let reservation of reservationResponseModels;
              let i = index
            "
        >
          <th scope="row" class="pt-3">{{ i + 1 }}</th>
          <td class="pt-3">
            <a (click)="onShowAnnouncementDetails(reservation.announcement)" style="color: blue">
              {{ reservation.announcement.announcementTitle }}
            </a>

          </td>
          <td class="pt-3">{{ reservation.reservationStartDate }}</td>
          <td class="pt-3">
            {{ reservation.reservationEndDate }}
          </td>
          <td class="pt-3">
              <span
                class="badge"
                [ngClass]="getReservationStatusBadge(reservation)"
              >
                {{
                getReservationStatus(reservation.reservationStatus)
                }}</span
              >
          </td>
          <td>
            <button tooltip="Annuler Réservation" [disabled]="reservation.reservationStatus.toString()== 'REFUSED'
                     || reservation.reservationStatus.toString()== 'CANCELED'"
                    (click)="onCancelReservation(cancelContent, reservation)"
                    class="btn btn-outline-warning btn-style"
            >
              <i class="fa fa-times-circle"></i>
            </button>
          </td>
        </tr>
        </tbody>
      </table>

      <div class="d-flex justify-content-between p-2">
        <ngb-pagination
          [collectionSize]="collectionSize"
          [(page)]="page"
          [pageSize]="pageSize"
          (pageChange)="refreshReservations()"
        >
        </ngb-pagination>

        <ng-select
          style="width: auto"
          [(ngModel)]="pageSize"
          (ngModelChange)="refreshReservations()"
        >
          <ng-option [value]="2">2 réservations par page</ng-option>
          <ng-option [value]="4">4 réservations par page</ng-option>
          <ng-option [value]="6">6 réservations par page</ng-option>
        </ng-select>
      </div>
    </div>
  </div>
</div>

<ng-template #cancelContent let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-title">Confirmation d'annulation</h4>
    <button
      type="button"
      class="btn-close"
      aria-describedby="modal-title"
      (click)="d('Cross click')"
    ></button>
  </div>
  <div class="modal-body">
    <p>
      <strong
      >Voulez-vous vraiment annuler votre réservation de l'annonce
        <span class="text-primary">{{
          reservationToCancel.announcement.announcementTitle
          }}</span>
        ?</strong
      >
    </p>
  </div>
  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-outline-secondary"
      (click)="d('Cross click')"
    >
      Cancel
    </button>
    <button
      type="button"
      class="btn btn-danger"
      (click)="onConfirmCancel()"
    >
      Annuler Réservation
    </button>
  </div>
</ng-template>
